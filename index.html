<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spix Capital - Position Size Calculator</title>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; padding: 20px; }
        input { padding: 10px; margin: 5px; width: 200px; }
        button { padding: 10px; cursor: pointer; }
        .box { display: inline-block; padding: 10px; border-radius: 5px; font-weight: bold; }
        .long { background-color: green; color: white; }
        .short { background-color: red; color: white; }
    </style>
</head>
<body>
    <h1>Spix Capital - Position Size Calculator</h1>
    
    <input type="number" id="capital" placeholder="Capital in Account" step="0.01"><br>
    <input type="number" id="marketPrice" placeholder="Market Price" step="0.00001"><br>
    <input type="number" id="stopLossPrice" placeholder="Stop-Loss Price" step="0.00001"><br>
    <input type="number" id="riskPercentage" placeholder="Risk %" step="0.01"><br>
    <input type="number" id="rewardPercentage" placeholder="Reward %" step="0.01"><br>
    
    <button onclick="calculatePositionSize()">Calculate</button>
    
    <h2>Order Type: <span id="orderType" class="box"></span></h2>
    <h3>Position Size: <span id="positionSize"></span></h3>
    <h3>Risk in USD: <span id="riskUsd"></span></h3>
    <h3>Reward in USD: <span id="rewardUsd"></span></h3>
    <h3>Stop-Loss Price: <span id="stopLoss"></span> <button onclick="copyToClipboard('stopLoss')">Copy</button></h3>
    <h3>Target Price: <span id="targetPrice"></span> <button onclick="copyToClipboard('targetPrice')">Copy</button></h3>
    
    <script>
        function calculatePositionSize() {
            let capital = parseFloat(document.getElementById('capital').value);
            let marketPrice = parseFloat(document.getElementById('marketPrice').value);
            let stopLossPrice = parseFloat(document.getElementById('stopLossPrice').value);
            let riskPercentage = parseFloat(document.getElementById('riskPercentage').value) / 100;
            let rewardPercentage = parseFloat(document.getElementById('rewardPercentage').value) / 100;
            
            if (isNaN(capital) || isNaN(marketPrice) || isNaN(stopLossPrice) || isNaN(riskPercentage) || isNaN(rewardPercentage)) {
                alert("Please enter all values correctly");
                return;
            }
            
            let orderType = (stopLossPrice > marketPrice) ? "SHORT" : "LONG";
            document.getElementById('orderType').textContent = orderType;
            document.getElementById('orderType').className = (orderType === "SHORT") ? "box short" : "box long";
            
            let stopLossPips = Math.abs(marketPrice - stopLossPrice) / 0.0001;
            let pipValuePerUnit = 0.0001 / marketPrice;
            
            let riskUsd = capital * riskPercentage;
            let positionSize = riskUsd / (stopLossPips * pipValuePerUnit);
            positionSize = Math.floor(positionSize / 1000) * 1000; // Round to nearest 1000 units
            
            let targetPrice = (orderType === "LONG") ? marketPrice + (marketPrice * rewardPercentage) : marketPrice - (marketPrice * rewardPercentage);
            let rewardPips = Math.abs(marketPrice - targetPrice) / 0.0001;
            let rewardUsd = positionSize * (rewardPips * pipValuePerUnit);
            
            document.getElementById('positionSize').textContent = positionSize;
            document.getElementById('riskUsd').textContent = riskUsd.toFixed(2);
            document.getElementById('rewardUsd').textContent = rewardUsd.toFixed(2);
            document.getElementById('stopLoss').textContent = stopLossPrice.toFixed(5);
            document.getElementById('targetPrice').textContent = targetPrice.toFixed(5);
        }
        
        function copyToClipboard(id) {
            let text = document.getElementById(id).textContent;
            navigator.clipboard.writeText(text);
            event.target.textContent = "Copied!";
            setTimeout(() => { event.target.textContent = "Copy"; }, 1500);
        }
    </script>
</body>
</html>
